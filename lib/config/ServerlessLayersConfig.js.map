{"version":3,"sources":["../../src/config/ServerlessLayersConfig.js"],"names":["ServerlessLayersConfig","options","shouldNotInstallPackages","shouldUseLayersArtifactory","artifactoryBucketName","artifactoryRegion","s3ArtifactoryAccessKeyId","process","env","SLS_CODE_ARTIFACTS_AWS_ACCESS_KEY_ID","s3ArtifactorySecretAccessKey","SLS_CODE_ARTIFACTS_AWS_SECRET_ACCESS_KEY","s3ArtifactorySessionToken","SLS_CODE_ARTIFACTS_AWS_SESSION_TOKEN","artifactoryHashKey","organizationId","uniqueTag","tag","artifactoryStr","plugin","pluginLayerName","getLayerName","artifactoryLayerName","includes","replace","artifactoryJsonMappingKey","artifactoryZipKey","tempArtifactoryZipFileName"],"mappings":";;;;;;;;;;;;;IAAaA,sB;AACX,kCAAYC,OAAZ,EAAqB;AAAA;AACnB,SAAKC,wBAAL,GAAiCD,OAAO,CAACC,wBAAR,KAAqC,MAAtE;AAEA,SAAKC,0BAAL,GAAmCF,OAAO,CAACE,0BAAR,KAAuC,MAA1E;AACA,SAAKC,qBAAL,GAA6BH,OAAO,CAACG,qBAArC;AACA,SAAKC,iBAAL,GAAyBJ,OAAO,CAACI,iBAAjC;AAEA,SAAKC,wBAAL,GAAgCC,OAAO,CAACC,GAAR,CAAYC,oCAA5C;AACA,SAAKC,4BAAL,GAAoCH,OAAO,CAACC,GAAR,CAAYG,wCAAhD;AACA,SAAKC,yBAAL,GAAiCL,OAAO,CAACC,GAAR,CAAYK,oCAA7C;AAEA,SAAKC,kBAAL,GAA0Bb,OAAO,CAACa,kBAAlC;AAEA,SAAKC,cAAL,GAAsBd,OAAO,CAACc,cAA9B;AACA,SAAKC,SAAL,GAAiBf,OAAO,CAACgB,GAAzB;AACA,SAAKC,cAAL,GAAsBjB,OAAO,CAACiB,cAAR,GAAyBjB,OAAO,CAACiB,cAAjC,GAAkD,aAAxE;AACD;;;;yBAEIC,M,EAAQ;AACX,UAAMC,eAAe,GAAGD,MAAM,CAACE,YAAP,EAAxB;AACA,WAAKC,oBAAL,GAA4BF,eAAe,CAACG,QAAhB,CAAyB,KAAKP,SAA9B,IAA2CI,eAAe,CAACI,OAAhB,CAAwB,KAAKR,SAA7B,EAAwC,KAAKE,cAA7C,CAA3C,aAA6GE,eAA7G,cAAgI,KAAKF,cAArI,CAA5B;AACA,WAAKO,yBAAL,aAAoC,KAAKH,oBAAzC,cAAiE,KAAKR,kBAAtE;AACA,WAAKY,iBAAL,aAA4B,KAAKJ,oBAAjC,cAAyD,KAAKA,oBAA9D;AACA,WAAKK,0BAAL,aAAqC,KAAKL,oBAA1C;AACD","sourcesContent":["export class ServerlessLayersConfig {\n  constructor(options) {\n    this.shouldNotInstallPackages = (options.shouldNotInstallPackages === 'true');\n\n    this.shouldUseLayersArtifactory = (options.shouldUseLayersArtifactory === 'true');\n    this.artifactoryBucketName = options.artifactoryBucketName;\n    this.artifactoryRegion = options.artifactoryRegion;\n\n    this.s3ArtifactoryAccessKeyId = process.env.SLS_CODE_ARTIFACTS_AWS_ACCESS_KEY_ID;\n    this.s3ArtifactorySecretAccessKey = process.env.SLS_CODE_ARTIFACTS_AWS_SECRET_ACCESS_KEY;\n    this.s3ArtifactorySessionToken = process.env.SLS_CODE_ARTIFACTS_AWS_SESSION_TOKEN;\n\n    this.artifactoryHashKey = options.artifactoryHashKey;\n\n    this.organizationId = options.organizationId;\n    this.uniqueTag = options.tag;\n    this.artifactoryStr = options.artifactoryStr ? options.artifactoryStr : 'artifactory';\n  }\n\n  init(plugin) {\n    const pluginLayerName = plugin.getLayerName();\n    this.artifactoryLayerName = pluginLayerName.includes(this.uniqueTag) ? pluginLayerName.replace(this.uniqueTag, this.artifactoryStr) : `${pluginLayerName}-${this.artifactoryStr}`;\n    this.artifactoryJsonMappingKey = `${this.artifactoryLayerName}/${this.artifactoryHashKey}.json`;\n    this.artifactoryZipKey = `${this.artifactoryLayerName}/${this.artifactoryLayerName}.zip`;\n    this.tempArtifactoryZipFileName = `${this.artifactoryLayerName}.zip`;\n  }\n\n}\n"],"file":"ServerlessLayersConfig.js"}